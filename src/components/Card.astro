---
import { Image } from 'astro:assets';

interface Props {
  title: string;
  href: string;
  body?: string;
  date?: Date;
  tag?: string;
  image?: string | ImageMetadata;
}

const { href, title, body, date, tag, image } = Astro.props;
---

<a href={href} class="block bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100 h-full flex flex-col group">
  {image && (
    <div class="h-48 overflow-hidden bg-gray-200">
      {typeof image === 'string' ? (
        <img src={image} alt={title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy" decoding="async" />
      ) : (
        <Image src={image} alt={title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
      )}
    </div>
  )}
  <div class="p-6 flex flex-col flex-grow">
    <div class="flex justify-between items-start mb-2">
      {tag && (
        <span class="inline-block bg-cream text-burgundy text-xs px-2 py-1 rounded-full font-semibold uppercase tracking-wide">
          {tag}
        </span>
      )}
      {date && (
        <span class="text-gray-500 text-sm">
          {date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
        </span>
      )}
    </div>
    <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-burgundy transition-colors">{title}</h3>
    {body && <p class="text-gray-600 line-clamp-3 flex-grow">{body}</p>}
    <div class="mt-4 text-brown font-medium text-sm flex items-center">
      Read more 
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
      </svg>
    </div>
  </div>
</a>
