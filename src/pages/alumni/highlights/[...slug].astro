---
import { getCollection } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';
import BackgroundAnimations from '../../../components/BackgroundAnimations.astro';

export async function getStaticPaths() {
  const entries = await getCollection('alumni');
  return entries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={`${entry.data.name} - Alumni Profile`} bodyClass="bg-[#111111] text-gray-200">
  <BackgroundAnimations variant="alumni" />
  <article class="max-w-3xl mx-auto px-4 py-8 relative z-10">
    <div class="bg-white/5 rounded-lg p-8 mb-8 flex flex-col md:flex-row gap-8 items-center md:items-start border border-white/10 shadow-lg backdrop-blur-sm">
      <div class="w-32 h-32 md:w-48 md:h-48 bg-gray-800 rounded-full overflow-hidden flex-shrink-0 border-4 border-gold/30 shadow-md">
        {entry.data.photo ? (
          <img src={entry.data.photo} alt={entry.data.name} class="w-full h-full object-cover" />
        ) : (
          <svg class="w-full h-full text-gray-600 p-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
          </svg>
        )}
      </div>
      <div class="text-center md:text-left">
        <h1 class="text-3xl font-bold text-white mb-2">{entry.data.name}</h1>
        <p class="text-xl text-gold font-semibold mb-2">Class of {entry.data.graduationYear}</p>
        <p class="text-lg text-gray-300 font-medium mb-1">{entry.data.currentRole}</p>
        {entry.data.location && <p class="text-gray-400 flex items-center justify-center md:justify-start gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
          </svg>
          {entry.data.location}
        </p>}
      </div>
    </div>
    
    <div class="prose prose-invert lg:prose-lg max-w-none prose-headings:text-gold prose-a:text-gold hover:prose-a:text-white prose-p:text-gray-300">
      <h2 class="text-2xl font-bold text-gold mb-4">About</h2>
      <p class="lead text-lg mb-6 text-gray-300">{entry.data.summary}</p>
      <Content />
    </div>

    <div class="mt-12 pt-8 border-t border-white/10">
      <a href="/alumni/highlights" class="text-gold font-bold hover:text-white hover:underline transition-colors">&larr; Back to Alumni Highlights</a>
    </div>
  </article>
</Layout>
