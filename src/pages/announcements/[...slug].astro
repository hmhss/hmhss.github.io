---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const entries = await getCollection('announcements');
  return entries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
  <article class="max-w-3xl mx-auto px-4">
    <div class="mb-8 border-b border-gold/20 pb-8">
      {entry.data.coverImage && (
        <img
          src={entry.data.coverImage}
          alt={entry.data.title}
          class="w-full h-auto rounded-lg shadow-md mb-6 object-cover max-h-[500px]"
        />
      )}
      <div class="flex items-center gap-2 mb-4">
         <span class="bg-cream text-burgundy text-xs px-2 py-1 rounded-full uppercase font-bold">{entry.data.category}</span>
         {entry.data.pinned && <span class="bg-burgundy text-white text-xs px-2 py-1 rounded-full uppercase font-bold">Pinned</span>}
      </div>
      <h1 class="text-3xl font-bold text-burgundy mb-2">{entry.data.title}</h1>
      <div class="text-gray-500">
        Posted on {entry.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
      </div>
    </div>
    
    <div class="prose lg:prose-lg text-gray-700 max-w-none prose-headings:text-burgundy prose-a:text-burgundy">
      <Content />
    </div>

    <div class="mt-12 pt-8 border-t border-gold/20">
      <a href="/announcements" class="text-burgundy font-bold hover:underline">&larr; Back to Announcements</a>
    </div>
  </article>
</Layout>
